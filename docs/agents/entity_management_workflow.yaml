version: 1

# ================================
# ENTITY MANAGEMENT WORKFLOW
# ================================

entity_management_workflow: |
  ## ğŸ” Entity Lifecycle Flow
  Má»—i entity má»›i cáº§n triá»ƒn khai theo luá»“ng chuáº©n sau:

  1. **Entity** (Entities/)
  2. **Configuration** (Persistence/Configurations/)
  3. **Repository & Interface** (Repositories/ & Repositories/Interfaces/)
  4. **Service & Interface** (Services/ & Services/Interfaces/)
  5. **DI Registration** (Extensions/ServiceCollectionExtensions.cs)
  6. **Controller** (Controllers/)
  7. **DTOs** (Models/)
  8. **Request Workflow** (Optional: Approve/Reject)

  ## ğŸ“¦ Entity Rules
  - Inherit tá»« `EntityBase<long>`
  - CÃ¡c trÆ°á»ng phá»• biáº¿n cáº§n cÃ³: `Code`, `Name`, `Description`, `IsActive`

  ## ğŸ—ï¸ Configuration Rules
  - `builder.ToTable("[EntityName]s")`
  - TÃªn báº£ng ROLES, BRANCHES, ...
  - `builder.HasKey(x => x.Id)`
  - TrÆ°á»ng `Code`, `Name`: báº¯t buá»™c, Ä‘á»™ dÃ i `50`, `200`
  - `IsActive` cÃ³ default value `false`

  ## ğŸ§  Repository Interface
  - I[EntityName]Repository:
  - Káº¿ thá»«a tá»« `IRepositoryBase<[EntityName], long, TDbContext>`

  ## ğŸ› ï¸ Repository Implementation
  - Inherit tá»« `RepositoryBase<[EntityName], long, TDbContext>`, I[EntityName]Repository

  ## ğŸ§ª Service Interface
  - CRUD + Approve/Reject:
    - `CreateAsync`, `UpdateAsync`, `DeleteAsync`
    - `ApproveAsync`, `RejectAsync`
    - `GetByIdAsync`, `GetByCodeAsync`
    - `GetPagedAsync`, `GetApprovedPagedAsync`

  ## ğŸ§± Service Implementation
  - Validate: `IsCodeExistsAsync`, `IsNameExistsAsync`
  - Táº¡o entity â†’ Gá»i `Repository.AddAsync` â†’ `UnitOfWork.SaveChangesAsync`
  - Approve â†’ GÃ¡n `ApprovedBy`, `ApprovedDate`

  ## ğŸ“¡ Controller
  - `[ApiController]` + `Route("api/[controller]")`
  - GET:
    - `/`, `/approved`, `/code/{code}`, `/{id}`
  - POST/PUT/DELETE:
    - `POST /` â†’ create
    - `PUT /{id}` â†’ update
    - `DELETE /{id}` â†’ soft delete
    - `POST /{id}/approve` â†’ approve
    - `POST /{id}/reject` â†’ reject

  ## ğŸ“¦ DTOs cáº§n cÃ³
  - `[EntityName]ListItemDto`
  - `[EntityName]DetailDto`
  - `Create[EntityName]Request`
  - `Update[EntityName]Request`
  - `Approve[EntityName]Request`
  - `Reject[EntityName]Request`
  - `Get[EntityName]PagingRequest`

  ## ğŸ“Œ PagingRequest Structure
  ```csharp
  public class Get[EntityName]PagingRequest : PagingRequest
  {
      public string? Keyword { get; set; }
      public string? IsActive { get; set; }

      protected override Dictionary<string, string> OrderByMappings => new()
      {
      };
  }
ğŸ”’ Constants cáº§n dÃ¹ng
StatusConstant.Approved, StatusConstant.Pending

RequestTypeConstant.Create, Update, Delete

âœ… Required Method Comments
LuÃ´n dÃ¹ng // ===== Section ===== Ä‘á»ƒ chia Ä‘oáº¡n rÃµ rÃ ng

DÃ¹ng /// <summary> cho Swagger XML Docs

âœ… Naming Convention
Interface: I[EntityName]Service, I[EntityName]Repository

Implementation: [EntityName]Service, [EntityName]Repository

Request class: Create[EntityName]Request

Controller: [EntityName]Controller

Table: [EntityName]s

âœ… DI Registration
Trong AddInfrastructureServices:

services.AddScoped<I[EntityName]Repository, [EntityName]Repository>();
services.AddScoped<I[EntityName]Service, [EntityName]Service>();